<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Establishing Communication between iPhone and Arduino Ethernet Shield</title>
        <meta charset="utf-8">
        <meta name="description" content="Andrew Wei, codenamed mu, is a software engineer, experience designer and illustrator.">
        <meta name="keywords" content="andrew,wei,andr,mu,engineer,designer,illustrator">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
        <meta property="og:url">
        <meta property="og:image" content="/og-image-3c57fca1f2.png">
        <meta property="og:title" content="Establishing Communication between iPhone and Arduino Ethernet Shield">
        <meta property="og:description" content="Andrew Wei, codenamed mu, is a software engineer, experience designer and illustrator.">
        <link rel="shortcut icon" href="/favicon.png">
        <link rel="manifest" href="/manifest.json">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-title" content="Establishing Communication between iPhone and Arduino Ethernet Shield">
        <link href="/apple-touch-icon-180x180-precomposed-151af9722e.png" sizes="180x180" rel="apple-touch-icon">
        <link href="/apple-touch-icon-152x152-precomposed-4d4481414b.png" sizes="152x152" rel="apple-touch-icon">
        <link href="/apple-touch-icon-144x144-precomposed-c735943caf.png" sizes="144x144" rel="apple-touch-icon">
        <link href="/apple-touch-icon-120x120-precomposed-81dd7e0ad6.png" sizes="120x120" rel="apple-touch-icon">
        <link href="/apple-touch-icon-114x114-precomposed-1daf1d75d6.png" sizes="114x114" rel="apple-touch-icon">
        <link href="/apple-touch-icon-76x76-precomposed-f49e287ced.png" sizes="76x76" rel="apple-touch-icon">
        <link href="/apple-touch-icon-72x72-precomposed-a5412e18eb.png" sizes="72x72" rel="apple-touch-icon">
        <link href="/apple-touch-icon-60x60-precomposed-55aaa7669c.png" sizes="60x60" rel="apple-touch-icon">
        <link href="/apple-touch-icon-57x57-precomposed-e896f01ce1.png" sizes="57x57" rel="apple-touch-icon">
        <link href="/apple-touch-icon-precomposed-609906461e.png" rel="apple-touch-icon">
        <meta name="msapplication-config" content="/browserconfig.xml">
        <meta name="application-name" content="Establishing Communication between iPhone and Arduino Ethernet Shield">
        <meta name="msapplication-tooltip" content="Get the latest updates!">
        <meta name="msapplication-window" content="width=1024;height=768">
        <meta name="msapplication-navbutton-color" content="#ff3300">
        <meta name="msapplication-starturl" content="/">
        <script type="text/javascript" src="https://unpkg.com/@webcomponents/webcomponentsjs@2.2.10/webcomponents-bundle.js"></script>
        <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-108117457-1"></script>
        <script>window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());
            gtag('config', 'UA-108117457-1');
        </script>
        <link rel="stylesheet" href="/assets/stylesheets/application-7fc252c149.css">
    </head>
    <body><page-home id="home" name="home"><a class="down triangle" is="x-a" type="button" href="/logs/" name="down-button" style="display:none;"></a>
            <div is="name-card" name="name-card">
                <section class="logo"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 70 70" style="enable-background:new 0 0 70 70;" xml:space="preserve" preserveAspectRatio="xMidYMid">
                        <circle class="dot-1" cx="5.3" cy="49.8" r="5.3"></circle>
                        <circle class="dot-2" cx="5.3" cy="35" r="5.3"></circle>
                        <circle class="dot-3" cx="5.3" cy="20.2" r="5.3"></circle>
                        <circle class="dot-4" cx="20.2" cy="20.2" r="5.3"></circle>
                        <circle class="dot-5" cx="35" cy="20.2" r="5.3"></circle>
                        <circle class="dot-6" cx="35" cy="35" r="5.3"></circle>
                        <circle class="dot-7" cx="35" cy="49.8" r="5.3"></circle>
                        <circle class="dot-8" cx="49.8" cy="49.8" r="5.3"></circle>
                        <circle class="dot-9" cx="64.7" cy="49.8" r="5.3"></circle>
                        <circle class="dot-10" cx="64.7" cy="35" r="5.3"></circle>
                        <circle class="dot-11" cx="64.7" cy="20.2" r="5.3"></circle>
                    </svg></section>
                <section class="name">
                    <h1 class="full-name">Andrew Wei</h1>
                </section>
                <section class="position"><span class="position" type="label">Engineer / Designer / Illustrator</span></section>
                <section class="connect"><a is="x-a" type="button" href="mailto:andrewscwei@gmail.com"><span type="icon" style="background-image: url(/assets/images/logs%2F439f2919-b36c-4403-837e-257d6bbde80c_email-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://github.com/andrewscwei"><span type="icon" style="background-image: url(/assets/images/logs%2F92b82402-ce51-49db-a8b2-d2c8924cdbe0_github-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://twitter.com/andrewscwei"><span type="icon" style="background-image: url(/assets/images/logs%2F719d8066-6750-4a08-afb7-a860a10482bc_twitter-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://calculator3.andr.mu"><span type="icon" style="background-image: url(/assets/images/logs%2Fa4f8b935-bf95-45ae-bf82-7fbee9b994be_calculator3-icon.svg?auto=compress,format)"></span></a><a class="inactive" is="x-a" type="button" href="https://www.variante.io"><span type="icon" style="background-image: url(/assets/images/logs%2F3781e233-b368-4800-bebb-17c5e47955d1_vaiante-icon.svg?auto=compress,format)"></span></a><a class="inactive" is="x-a" type="button" href="https://www.grubbb.co"><span type="icon" style="background-image: url(/assets/images/logs%2F698dcb27-4e5e-4f9c-8473-0e5bb46af2d1_grubbb-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://www.verb.studio"><span type="icon" style="background-image: url(/assets/images/logs%2F6bf8145f-5ea8-41d6-8cdd-d9c199a97806_verb-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://dice.andr.mu"><span type="icon" style="background-image: url(/assets/images/logs%2F6d5406b1-3ec0-4915-abdf-f39a8ee95801_dice-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://monitor.andr.mu"><span type="icon" style="background-image: url(/assets/images/logs%2F7021ac91-7a57-4815-90e7-90cf2011cdf7_monitoring-test-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://www.aristotl.io"><span type="icon" style="background-image: url(/assets/images/logs%2F0240039f-2372-4fa9-af5c-18880f192e4c_aristotl-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://www.sybl.io"><span type="icon" style="background-image: url(/assets/images/logs%2F5e961282-d08e-433d-960b-1e114a2bbc12_sybl.svg?auto=compress,format)"></span></a></section>
            </div>
        </page-home>
        <main id="page"><page-cover id="cover" name="cover">
                <figure name="background" style="background-image:url(/assets/images/logs/4994ca1e345807fd805fc5f4dab1f2fba5e932e1_arduino-cover.jpg?auto=compress,format)"></figure>
            </page-cover>
            <nav is="global-nav" id="global-nav" name="global-nav"><a class="logs" is="x-a" type="button" href="/logs/3/" name="grid-button"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 70 70" style="enable-background:new 0 0 70 70;" xml:space="preserve" preserveAspectRatio="xMidYMid">
                        <path class="tl" d="M30,33H3c-1.7,0-3-1.3-3-3V3c0-1.7,1.3-3,3-3h27c1.7,0,3,1.3,3,3v27C33,31.7,31.7,33,30,33L30,33z M6,27h21V6H6V27L6,27z"></path>
                        <path class="tr" d="M67,33H40c-1.7,0-3-1.3-3-3V3c0-1.7,1.3-3,3-3h27c1.7,0,3,1.3,3,3v27C70,31.7,68.7,33,67,33L67,33z M43,27h21V6H43V27    L43,27z"></path>
                        <path class="bl" d="M30,70H3c-1.7,0-3-1.3-3-3V40c0-1.7,1.3-3,3-3h27c1.7,0,3,1.3,3,3v27C33,68.7,31.7,70,30,70L30,70z M6,64h21V43H6V64L6,64    z"></path>
                        <path class="br" d="M67,70H40c-1.7,0-3-1.3-3-3V40c0-1.7,1.3-3,3-3h27c1.7,0,3,1.3,3,3v27C70,68.7,68.7,70,67,70L67,70z M43,64h21V43H43V64    L43,64z"></path>
                    </svg></a></nav><page-log id="log" name="page">
                <div id="inner-page">
                    <div name="header">
                        <div name="info">
                            <h1 name="title">Establishing Communication between iPhone and Arduino Ethernet Shield</h1><span name="date" type="label">Jun 24 11</span>
                            <div name="tags"><a class="tag slug" is="x-a" type="button" href="/logs/tag/arduino/"><span type="label">arduino</span></a><a class="tag slug" is="x-a" type="button" href="/logs/tag/c/"><span type="label">c++</span></a><a class="tag slug" is="x-a" type="button" href="/logs/tag/ios/"><span type="label">ios</span></a><a class="tag slug" is="x-a" type="button" href="/logs/tag/mobile/"><span type="label">mobile</span></a></div>
                        </div>
                    </div>
                    <div name="contents">
                        <p>This log demonstrates the concept behind establishing communication between an iOS device (iPhone, iPad, or iPod Touch) and an Arduino I/O board with the Ethernet Shield mounted. I will describe a method I used to successfully establish this communication.</p>
                        <p>The basic idea is to make sure both the iOS device and the Ethernet Shield are under the same network. You can do this by hooking both of them up to the same router. You will also need to assign a dedicated IP address to the Ethernet Shield so the iOS device can place an HTTP request to that IP.</p>
                        <h2 id="on-the-arduino-io-board">On the Arduino I/O Board</h2>
                        <p>Download the Arduino-based web server library <a href="http://code.google.com/p/webduino/">Webduino</a>. Use the following code snippet as a reference on how to parse captured HTTP requests received by the Ethernet Shield. In this particular example the Ethernet Shield picks up local HTTP requests and assigns a digital HIGH/LOW value to the corresponding pin.</p>
                        <pre class=" line-numbers language-c"><code class=" language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Ethernet.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"SPI.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"WebServer.h"</span></span>

<span class="token comment">// Reset Definitions</span>
<span class="token macro property">#<span class="token directive keyword">define</span> PREFIX "/web"</span>
<span class="token macro property">#<span class="token directive keyword">define</span> NAMELEN 32</span>
<span class="token macro property">#<span class="token directive keyword">define</span> VALUELEN 32</span>

<span class="token comment">// Assign MAC Address</span>
<span class="token keyword">static</span> uint8_t mac<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">0xFF</span><span class="token punctuation">,</span> <span class="token number">0xFF</span><span class="token punctuation">,</span> <span class="token number">0xFF</span><span class="token punctuation">,</span> <span class="token number">0xFF</span><span class="token punctuation">,</span> <span class="token number">0xFF</span><span class="token punctuation">,</span> <span class="token number">0xFF</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Assign IP Addres</span>
<span class="token keyword">static</span> uint8_t ip<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

WebServer <span class="token function">webserver</span><span class="token punctuation">(</span>PREFIX<span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">response</span><span class="token punctuation">(</span>WebServer <span class="token operator">&amp;</span>amp<span class="token punctuation">;</span>server<span class="token punctuation">,</span> WebServer<span class="token operator">::</span>ConnectionType type<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">,</span> bool<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// This line sends the standard "we're all OK" headers back to the browser.</span>
    server<span class="token punctuation">.</span><span class="token function">httpSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// If we're handling a GET or POST, we can output our data here.</span>
    <span class="token comment">// For a HEAD request, we just stop after outputting headers.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">!=</span> WebServer<span class="token operator">::</span>HEAD<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// This defines some HTML text in read-only memory aka PROGMEM.</span>
        <span class="token comment">// This is needed to avoid having the string copied to our limited</span>
        <span class="token comment">// amount of RAM.</span>
        <span class="token function">P</span><span class="token punctuation">(</span>responseHTML<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">"Thanks for playing."</span><span class="token punctuation">;</span>

        <span class="token comment">// This is a special form of print that outputs from PROGMEM.</span>
        server<span class="token punctuation">.</span><span class="token function">printP</span><span class="token punctuation">(</span>responseHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">activate</span><span class="token punctuation">(</span>WebServer <span class="token operator">&amp;</span>amp<span class="token punctuation">;</span>server<span class="token punctuation">,</span> WebServer<span class="token operator">::</span>ConnectionType type<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>url_tail<span class="token punctuation">,</span> bool tail_complete<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    URLPARAM_RESULT rc<span class="token punctuation">;</span>
    <span class="token keyword">char</span> name<span class="token punctuation">[</span>NAMELEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span>  name_len<span class="token punctuation">;</span>
    <span class="token keyword">char</span> value<span class="token punctuation">[</span>VALUELEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> value_len<span class="token punctuation">;</span>

    server<span class="token punctuation">.</span><span class="token function">httpSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> WebServer<span class="token operator">::</span>GET<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span>url_tail<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span>url_tail<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                rc <span class="token operator">=</span> server<span class="token punctuation">.</span><span class="token function">nextURLparam</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>amp<span class="token punctuation">;</span>url_tail<span class="token punctuation">,</span> name<span class="token punctuation">,</span> NAMELEN<span class="token punctuation">,</span> value<span class="token punctuation">,</span> VALUELEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>rc <span class="token operator">!=</span> URLPARAM_EOS<span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'p'</span><span class="token punctuation">)</span>
                    <span class="token punctuation">{</span>
                        <span class="token keyword">int</span> pin <span class="token operator">=</span> <span class="token function">strtoul</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                        <span class="token function">digitalWrite</span><span class="token punctuation">(</span>pin<span class="token punctuation">,</span> HIGH<span class="token punctuation">)</span><span class="token punctuation">;</span>

                        <span class="token function">P</span><span class="token punctuation">(</span>responseHTML<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">"Pin is HIGH."</span><span class="token punctuation">;</span>
                        server<span class="token punctuation">.</span><span class="token function">printP</span><span class="token punctuation">(</span>responseHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">deactivate</span><span class="token punctuation">(</span>WebServer <span class="token operator">&amp;</span>amp<span class="token punctuation">;</span>server<span class="token punctuation">,</span> WebServer<span class="token operator">::</span>ConnectionType type<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>url_tail<span class="token punctuation">,</span> bool tail_complete<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">char</span> name<span class="token punctuation">[</span>NAMELEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span>  name_len<span class="token punctuation">;</span>
    <span class="token keyword">char</span> value<span class="token punctuation">[</span>VALUELEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> value_len<span class="token punctuation">;</span>
    URLPARAM_RESULT rc<span class="token punctuation">;</span>
    server<span class="token punctuation">.</span><span class="token function">httpSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> WebServer<span class="token operator">::</span>GET<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span>url_tail<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span>url_tail<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                rc <span class="token operator">=</span> server<span class="token punctuation">.</span><span class="token function">nextURLparam</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>amp<span class="token punctuation">;</span>url_tail<span class="token punctuation">,</span> name<span class="token punctuation">,</span> NAMELEN<span class="token punctuation">,</span> value<span class="token punctuation">,</span> VALUELEN<span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token keyword">if</span> <span class="token punctuation">(</span>rc <span class="token operator">!=</span> URLPARAM_EOS<span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'p'</span><span class="token punctuation">)</span>
                    <span class="token punctuation">{</span>
                        <span class="token keyword">int</span> pin <span class="token operator">=</span> <span class="token function">strtoul</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                        <span class="token function">digitalWrite</span><span class="token punctuation">(</span>pin<span class="token punctuation">,</span> LOW<span class="token punctuation">)</span><span class="token punctuation">;</span>

                        <span class="token function">P</span><span class="token punctuation">(</span>responseHTML<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">"Pin is LOW."</span><span class="token punctuation">;</span>
                        server<span class="token punctuation">.</span><span class="token function">printP</span><span class="token punctuation">(</span>responseHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Ethernet<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span>mac<span class="token punctuation">,</span> ip<span class="token punctuation">)</span><span class="token punctuation">;</span>

    webserver<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    webserver<span class="token punctuation">.</span><span class="token function">setDefaultCommand</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>amp<span class="token punctuation">;</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    webserver<span class="token punctuation">.</span><span class="token function">addCommand</span><span class="token punctuation">(</span><span class="token string">"PIN_ACTIVATE"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>amp<span class="token punctuation">;</span>activate<span class="token punctuation">)</span><span class="token punctuation">;</span>
    webserver<span class="token punctuation">.</span><span class="token function">addCommand</span><span class="token punctuation">(</span><span class="token string">"PIN_DEACTIVATE"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>amp<span class="token punctuation">;</span>deactivate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Process incoming connections one at a time forever.</span>
    webserver<span class="token punctuation">.</span><span class="token function">processConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
                        <p>Make sure that the correct IP address is specified in the code (<code>ip[]</code> variable). Configure the router to assign a dedicated IP address to the Ethernet Shield to make things easier. Enter an unused MAC address to <code>mac[]</code>. Flash the code onto the Arduino I/O board. If necessary, you can test the code by sending an HTTP request (i.e. in a browser or something) from a computer that is connected to the same router as the Ethernet Shield. An example would be: <code>http://{ip address of Ethernet Shield}/web/PIN_ACTIVATE?p=4</code>. <code>/web/</code> is the prefix I set in the code for clarity purposes. <code>PIN_ACTIVATE</code> is the function name (also specified in the code) and <code>p=4</code> is the parameter. This should set pin 4 on the Arduino to HIGH.</p>
                        <h2 id="on-the-ios-device">On the iOS Device</h2>
                        <p>Connect the iOS device to the router which the Ethernet Shield is using. Create an app that sends HTTP requests using the specified format (i.e. <code>http://{ip address of Ethernet Shield}/web/PIN_ACTIVATE?p=4</code>). If everything is hooked up correctly, the Ethernet Shield should be able to pick up the request sent by the iOS device. In my project, I simply placed a <code>UIWebView</code> in my app and used JavaScript to send formatted HTTP requests. A simple JavaScript code like this would do:</p>
                        <pre class=" line-numbers language-javascript"><code class=" language-javascript">req <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
req<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'http://{ip address of Ethernet Shield}/web/PIN_ACTIVATE?p=4'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
req<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
                        <p>The rest is open for implementation.</p>
                        <h2 id="sources">Source(s)</h2>
                        <ol>
                            <li><a href="http://code.google.com/p/webduino/">Webduino Library</a></li>
                        </ol>
                    </div>
                    <div name="footer"><a class="prev post" is="x-a" type="button" href="/logs/as3-event-phases/"><span class="prev" type="icon"></span><span type="label">prev</span></a><button class="arrow" is="x-button" type="button" name="top-button"><span class="up" type="icon"></span></button><a class="next post" is="x-a" type="button" href="/logs/using-the-arduino-ethernet-shield-with-tlc5940/"><span class="next" type="icon"></span><span type="label">next</span></a></div>
                    <div name="related">
                        <div class="tags" name="tags"><button class="tag" is="x-button" type="button" disabled="disabled"><span type="label">related</span></button></div>
                        <div class="grid"><a type="button" is="log-entry" href="/logs/the-shunting-yard-algorithm/" name="entry">
                                <div class="wrapper">
                                    <h2 class="title">The Shunting-Yard Algorithm</h2><span class="date" type="label">Oct 09 11</span><span class="number" type="label">5</span>
                                </div>
                            </a><a type="button" is="log-entry" href="/logs/migrating-an-ios-app-from-paid-to-freemium/" name="entry">
                                <div class="wrapper">
                                    <h2 class="title">Migrating an iOS App From Paid to Freemium</h2><span class="date" type="label">Jun 10 15</span><span class="number" type="label">14</span>
                                </div>
                            </a><a type="button" is="log-entry" href="/logs/using-the-arduino-ethernet-shield-with-tlc5940/" name="entry">
                                <div class="wrapper">
                                    <h2 class="title">Using the Arduino Ethernet Shield with TLC5940</h2><span class="date" type="label">Jun 22 11</span><span class="number" type="label">1</span>
                                </div>
                            </a></div>
                    </div>
                </div>
            </page-log>
        </main>
        <script src="/assets/javascripts/polyfills-4df15158e5.js"></script>
        <script src="/assets/javascripts/common-a589f09cab.js"></script>
        <script src="/assets/javascripts/application-a1f774b4b0.js"></script>
    </body>
</html>
