<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Linux User Management</title>
    <meta charset="utf-8">
    <meta name="description" content="Andrew Wei, codenamed mu, is a software engineer, experience designer and illustrator.">
    <meta name="keywords" content="andrew,wei,andr,mu,engineer,designer,illustrator">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta property="og:url">
    <meta property="og:image" content="/og-image-3c57fca1f2.png">
    <meta property="og:title" content="Linux User Management">
    <meta property="og:description" content="Andrew Wei, codenamed mu, is a software engineer, experience designer and illustrator.">
    <link rel="shortcut icon" href="/favicon.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Linux User Management">
    <link href="/apple-touch-icon-180x180-precomposed-151af9722e.png" sizes="180x180" rel="apple-touch-icon">
    <link href="/apple-touch-icon-152x152-precomposed-4d4481414b.png" sizes="152x152" rel="apple-touch-icon">
    <link href="/apple-touch-icon-144x144-precomposed-c735943caf.png" sizes="144x144" rel="apple-touch-icon">
    <link href="/apple-touch-icon-120x120-precomposed-81dd7e0ad6.png" sizes="120x120" rel="apple-touch-icon">
    <link href="/apple-touch-icon-114x114-precomposed-1daf1d75d6.png" sizes="114x114" rel="apple-touch-icon">
    <link href="/apple-touch-icon-76x76-precomposed-f49e287ced.png" sizes="76x76" rel="apple-touch-icon">
    <link href="/apple-touch-icon-72x72-precomposed-a5412e18eb.png" sizes="72x72" rel="apple-touch-icon">
    <link href="/apple-touch-icon-60x60-precomposed-55aaa7669c.png" sizes="60x60" rel="apple-touch-icon">
    <link href="/apple-touch-icon-57x57-precomposed-e896f01ce1.png" sizes="57x57" rel="apple-touch-icon">
    <link href="/apple-touch-icon-precomposed-609906461e.png" rel="apple-touch-icon">
    <meta name="msapplication-config" content="/browserconfig.xml">
    <meta name="application-name" content="Linux User Management">
    <meta name="msapplication-tooltip" content="Get the latest updates!">
    <meta name="msapplication-window" content="width=1024;height=768">
    <meta name="msapplication-navbutton-color" content="#ff3300">
    <meta name="msapplication-starturl" content="/">
    <script type="text/javascript" src="https://unpkg.com/@webcomponents/webcomponentsjs@2.2.10/webcomponents-bundle.js"></script>
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-108117457-1"></script>
    <script>window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', 'UA-108117457-1');
    </script>
    <link rel="stylesheet" href="/assets/stylesheets/application-7fc252c149.css">
  </head>
  <body><page-home id="home" name="home"><a class="down triangle" is="x-a" type="button" href="/logs/" name="down-button" style="display:none;"></a>
      <div is="name-card" name="name-card">
        <section class="logo"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 70 70" style="enable-background:new 0 0 70 70;" xml:space="preserve" preserveAspectRatio="xMidYMid">
            <circle class="dot-1" cx="5.3" cy="49.8" r="5.3"></circle>
            <circle class="dot-2" cx="5.3" cy="35" r="5.3"></circle>
            <circle class="dot-3" cx="5.3" cy="20.2" r="5.3"></circle>
            <circle class="dot-4" cx="20.2" cy="20.2" r="5.3"></circle>
            <circle class="dot-5" cx="35" cy="20.2" r="5.3"></circle>
            <circle class="dot-6" cx="35" cy="35" r="5.3"></circle>
            <circle class="dot-7" cx="35" cy="49.8" r="5.3"></circle>
            <circle class="dot-8" cx="49.8" cy="49.8" r="5.3"></circle>
            <circle class="dot-9" cx="64.7" cy="49.8" r="5.3"></circle>
            <circle class="dot-10" cx="64.7" cy="35" r="5.3"></circle>
            <circle class="dot-11" cx="64.7" cy="20.2" r="5.3"></circle>
          </svg></section>
        <section class="name">
          <h1 class="full-name">Andrew Wei</h1>
        </section>
        <section class="position"><span class="position" type="label">Engineer / Designer / Illustrator</span></section>
        <section class="connect"><a is="x-a" type="button" href="mailto:andrewscwei@gmail.com"><span type="icon" style="background-image: url(/assets/images/logs%2F439f2919-b36c-4403-837e-257d6bbde80c_email-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://github.com/andrewscwei"><span type="icon" style="background-image: url(/assets/images/logs%2F92b82402-ce51-49db-a8b2-d2c8924cdbe0_github-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://twitter.com/andrewscwei"><span type="icon" style="background-image: url(/assets/images/logs%2F719d8066-6750-4a08-afb7-a860a10482bc_twitter-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://calculator3.andr.mu"><span type="icon" style="background-image: url(/assets/images/logs%2Fa4f8b935-bf95-45ae-bf82-7fbee9b994be_calculator3-icon.svg?auto=compress,format)"></span></a><a class="inactive" is="x-a" type="button" href="https://www.variante.io"><span type="icon" style="background-image: url(/assets/images/logs%2F3781e233-b368-4800-bebb-17c5e47955d1_vaiante-icon.svg?auto=compress,format)"></span></a><a class="inactive" is="x-a" type="button" href="https://www.grubbb.co"><span type="icon" style="background-image: url(/assets/images/logs%2F698dcb27-4e5e-4f9c-8473-0e5bb46af2d1_grubbb-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://www.verb.studio"><span type="icon" style="background-image: url(/assets/images/logs%2F6bf8145f-5ea8-41d6-8cdd-d9c199a97806_verb-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://dice.andr.mu"><span type="icon" style="background-image: url(/assets/images/logs%2F6d5406b1-3ec0-4915-abdf-f39a8ee95801_dice-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://monitor.andr.mu"><span type="icon" style="background-image: url(/assets/images/logs%2F7021ac91-7a57-4815-90e7-90cf2011cdf7_monitoring-test-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://www.aristotl.io"><span type="icon" style="background-image: url(/assets/images/logs%2F0240039f-2372-4fa9-af5c-18880f192e4c_aristotl-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://www.sybl.io"><span type="icon" style="background-image: url(/assets/images/logs%2F5e961282-d08e-433d-960b-1e114a2bbc12_sybl.svg?auto=compress,format)"></span></a></section>
      </div>
    </page-home>
    <main id="page"><page-cover id="cover" name="cover">
        <figure name="background" style="background-image:url(/assets/images/logs/c3d6eb514e50209be3f92bb51f35e44a0e122519_linux.png?auto=compress,format)"></figure>
      </page-cover>
      <nav is="global-nav" id="global-nav" name="global-nav"><a class="logs" is="x-a" type="button" href="/logs/" name="grid-button"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 70 70" style="enable-background:new 0 0 70 70;" xml:space="preserve" preserveAspectRatio="xMidYMid">
            <path class="tl" d="M30,33H3c-1.7,0-3-1.3-3-3V3c0-1.7,1.3-3,3-3h27c1.7,0,3,1.3,3,3v27C33,31.7,31.7,33,30,33L30,33z M6,27h21V6H6V27L6,27z"></path>
            <path class="tr" d="M67,33H40c-1.7,0-3-1.3-3-3V3c0-1.7,1.3-3,3-3h27c1.7,0,3,1.3,3,3v27C70,31.7,68.7,33,67,33L67,33z M43,27h21V6H43V27    L43,27z"></path>
            <path class="bl" d="M30,70H3c-1.7,0-3-1.3-3-3V40c0-1.7,1.3-3,3-3h27c1.7,0,3,1.3,3,3v27C33,68.7,31.7,70,30,70L30,70z M6,64h21V43H6V64L6,64    z"></path>
            <path class="br" d="M67,70H40c-1.7,0-3-1.3-3-3V40c0-1.7,1.3-3,3-3h27c1.7,0,3,1.3,3,3v27C70,68.7,68.7,70,67,70L67,70z M43,64h21V43H43V64    L43,64z"></path>
          </svg></a></nav><page-log id="log" name="page">
        <div id="inner-page">
          <div name="header">
            <div name="info">
              <h1 name="title">Linux User Management</h1><span name="date" type="label">May 31 15</span>
              <div name="tags"><a class="tag slug" is="x-a" type="button" href="/logs/tag/systems/"><span type="label">systems</span></a></div>
            </div>
          </div>
          <div name="contents">
            <h2 id="where-user-info-are-stored">Where User Info Are Stored</h2>
            <ol>
              <li><code>/etc/passwd</code>: List of users.</li>
              <li><code>/etc/shadow</code>: Users' encrypted password.</li>
              <li><code>/etc/group</code>: List of groups.</li>
              <li><code>/etc/default/useradd</code>: Value for the default group if none is specified by the <code>useradd</code> command.</li>
              <li><code>/etc/login.defs</code>: Defines site-specific configurations for the shadow passwords stored in the <code>/etc/shadow</code> file.</li>
            </ol>
            <h2 id="managing-users">Managing Users</h2>
            <p>A user can belong to 1 primary group and muliple secondary groups.</p>
            <h4 id="to-add-a-new-user-by-default-this-creates-a-new-group-with-the-same-name-and-assigns-this-new-users-primary-group-to-the-new-group">To add a new user (by default this creates a new group with the same name and assigns this new user's primary group to the new group):</h4>
            <pre class=" line-numbers language-bash"><code class=" language-bash">$ <span class="token function">useradd</span> username<span class="line-numbers-rows"><span></span></span></code></pre>
            <h4 id="to-add-a-new-user-and-assign-its-primary-group-to-an-existing-group">To add a new user and assign its primary group to an existing group:</h4>
            <pre class=" line-numbers language-bash"><code class=" language-bash">$ <span class="token function">useradd</span> -g <span class="token punctuation">{</span>primary_group_name<span class="token punctuation">}</span> <span class="token punctuation">{</span>username<span class="token punctuation">}</span><span class="line-numbers-rows"><span></span></span></code></pre>
            <h4 id="to-add-a-new-user-and-assign-its-secondary-group-to-an-existing-group-primary-group-is-still-the-same-as-the-username">To add a new user and assign its secondary group to an existing group (primary group is still the same as the username):</h4>
            <pre class=" line-numbers language-bash"><code class=" language-bash">$ <span class="token function">useradd</span> -G <span class="token punctuation">{</span>secondary_group_name, secondary_group_name, <span class="token punctuation">..</span>.<span class="token punctuation">}</span> <span class="token punctuation">{</span>username<span class="token punctuation">}</span><span class="line-numbers-rows"><span></span></span></code></pre>
            <h4 id="to-create-a-new-home-directory-and-assign-its-ownership-to-the-new-user">To create a new home directory and assign its ownership to the new user:</h4>
            <pre class=" line-numbers language-bash"><code class=" language-bash">$ <span class="token function">mkdir</span> /home/username
$ <span class="token function">chown</span> <span class="token punctuation">{</span>username<span class="token punctuation">}</span> /home/username<span class="line-numbers-rows"><span></span><span></span></span></code></pre>
            <h4 id="to-createchange-a-password">To create/change a password:</h4>
            <pre class=" line-numbers language-bash"><code class=" language-bash">$ <span class="token function">passwd</span> <span class="token punctuation">{</span>username<span class="token punctuation">}</span><span class="line-numbers-rows"><span></span></span></code></pre>
            <h4 id="to-delete-a-user">To delete a user:</h4>
            <pre class=" line-numbers language-bash"><code class=" language-bash">$ <span class="token function">userdel</span> <span class="token punctuation">{</span>username<span class="token punctuation">}</span><span class="line-numbers-rows"><span></span></span></code></pre>
            <h4 id="to-delete-a-user-along-with-its-home-directory-and-mail-spool">To delete a user along with its home directory and mail spool:</h4>
            <pre class=" line-numbers language-bash"><code class=" language-bash">$ <span class="token function">userdel</span> -r <span class="token punctuation">{</span>username<span class="token punctuation">}</span><span class="line-numbers-rows"><span></span></span></code></pre>
            <h4 id="to-check-the-status-of-a-user">To check the status of a user:</h4>
            <pre class=" line-numbers language-bash"><code class=" language-bash">$ <span class="token function">id</span> <span class="token punctuation">{</span>username<span class="token punctuation">}</span><span class="line-numbers-rows"><span></span></span></code></pre>
            <h4 id="to-check-the-secondary-groups-which-a-user-belongs-to">To check the secondary groups which a user belongs to:</h4>
            <pre class=" line-numbers language-bash"><code class=" language-bash">$ <span class="token function">id</span> -nG <span class="token punctuation">{</span>username<span class="token punctuation">}</span><span class="line-numbers-rows"><span></span></span></code></pre>
            <h4 id="to-change-an-existing-users-primary-group">To change an existing user's primary group:</h4>
            <pre class=" line-numbers language-bash"><code class=" language-bash">$ <span class="token function">usermod</span> -g <span class="token punctuation">{</span>primary_group_name<span class="token punctuation">}</span> <span class="token punctuation">{</span>username<span class="token punctuation">}</span><span class="line-numbers-rows"><span></span></span></code></pre>
            <h4 id="to-overwrite-an-existing-users-secondary-groups">To overwrite an existing user's secondary groups:</h4>
            <pre class=" line-numbers language-bash"><code class=" language-bash">$ <span class="token function">usermod</span> -G <span class="token punctuation">{</span>secondary_group_name, secondary_group_name, <span class="token punctuation">..</span>.<span class="token punctuation">}</span> <span class="token punctuation">{</span>username<span class="token punctuation">}</span><span class="line-numbers-rows"><span></span></span></code></pre>
            <h4 id="to-add-a-secondary-group-to-an-existing-user">To add a secondary group to an existing user:</h4>
            <pre class=" line-numbers language-bash"><code class=" language-bash">$ <span class="token function">usermod</span> -a -G <span class="token punctuation">{</span>secondary_group_name<span class="token punctuation">}</span> <span class="token punctuation">{</span>username<span class="token punctuation">}</span><span class="line-numbers-rows"><span></span></span></code></pre>
            <h4 id="to-change-a-users-default-shell-to-bash-for-example">To change a user's default shell (to bash, for example):</h4>
            <pre class=" line-numbers language-bash"><code class=" language-bash">$ <span class="token function">usermod</span> -s /bin/bash <span class="token punctuation">{</span>username<span class="token punctuation">}</span><span class="line-numbers-rows"><span></span></span></code></pre>
            <h2 id="managing-user-groups">Managing User Groups</h2>
            <p>There are two types of user groups in the Linux system: primary and secondary. Groups are defined in <code>/etc/group</code>.</p>
            <h4 id="to-create-a-new-group">To create a new group:</h4>
            <pre class=" line-numbers language-bash"><code class=" language-bash">$ <span class="token function">groupadd</span> <span class="token punctuation">{</span>group_name<span class="token punctuation">}</span><span class="line-numbers-rows"><span></span></span></code></pre>
            <h4 id="to-delete-an-existing-group">To delete an existing group:</h4>
            <pre class=" line-numbers language-bash"><code class=" language-bash">$ <span class="token function">groupdel</span> <span class="token punctuation">{</span>group_name<span class="token punctuation">}</span><span class="line-numbers-rows"><span></span></span></code></pre>
            <h4 id="to-check-the-status-of-a-group">To check the status of a group:</h4>
            <pre class=" line-numbers language-bash"><code class=" language-bash">$ <span class="token function">grep</span> <span class="token punctuation">{</span>group_name<span class="token punctuation">}</span> /etc/group<span class="line-numbers-rows"><span></span></span></code></pre>
          </div>
          <div name="footer"><a class="prev post" is="x-a" type="button" href="/logs/google-compute-engine-setup-for-django-app-with-uwsgi/"><span class="prev" type="icon"></span><span type="label">prev</span></a><button class="arrow" is="x-button" type="button" name="top-button"><span class="up" type="icon"></span></button><a class="next post" is="x-a" type="button" href="/logs/xcode-custom-key-bindings/"><span class="next" type="icon"></span><span type="label">next</span></a></div>
          <div name="related">
            <div class="tags" name="tags"><button class="tag" is="x-button" type="button" disabled="disabled"><span type="label">related</span></button></div>
            <div class="grid"><a type="button" is="log-entry" href="/logs/push-deploy-a-django-app-with-bitnami-jenkins-on-google/" name="entry">
                <div class="wrapper">
                  <h2 class="title">Push-Deploy a Django App with Bitnami Jenkins on Google Cloud Engine</h2><span class="date" type="label">Jun 02 15</span><span class="number" type="label">13</span>
                </div>
              </a><a type="button" is="log-entry" href="/logs/google-compute-engine-setup-for-django-app-with-uwsgi/" name="entry">
                <div class="wrapper">
                  <h2 class="title">Google Compute Engine Setup for Django App with uWSGI and Nginx</h2><span class="date" type="label">Jun 01 15</span><span class="number" type="label">12</span>
                </div>
              </a><a type="button" is="log-entry" href="/logs/as3-event-phases/" name="entry">
                <div class="wrapper">
                  <h2 class="title">AS3: Event Phases</h2><span class="date" type="label">Aug 07 11</span><span class="number" type="label">3</span>
                </div>
              </a></div>
          </div>
        </div>
      </page-log>
    </main>
    <script src="/assets/javascripts/polyfills-4df15158e5.js"></script>
    <script src="/assets/javascripts/common-a589f09cab.js"></script>
    <script src="/assets/javascripts/application-a1f774b4b0.js"></script>
  </body>
</html>
