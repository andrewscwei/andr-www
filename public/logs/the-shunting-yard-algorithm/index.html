<!DOCTYPE html>
<html lang="en">
  <head>
    <title>The Shunting-Yard Algorithm</title>
    <meta charset="utf-8">
    <meta name="description" content="Andrew Wei, codenamed mu, is a software engineer, experience designer and illustrator.">
    <meta name="keywords" content="andrew,wei,andr,mu,engineer,designer,illustrator">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta property="og:url">
    <meta property="og:image" content="/og-image-3c57fca1f2.png">
    <meta property="og:title" content="The Shunting-Yard Algorithm">
    <meta property="og:description" content="Andrew Wei, codenamed mu, is a software engineer, experience designer and illustrator.">
    <link rel="shortcut icon" href="/favicon.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="The Shunting-Yard Algorithm">
    <link href="/apple-touch-icon-180x180-precomposed-151af9722e.png" sizes="180x180" rel="apple-touch-icon">
    <link href="/apple-touch-icon-152x152-precomposed-4d4481414b.png" sizes="152x152" rel="apple-touch-icon">
    <link href="/apple-touch-icon-144x144-precomposed-c735943caf.png" sizes="144x144" rel="apple-touch-icon">
    <link href="/apple-touch-icon-120x120-precomposed-81dd7e0ad6.png" sizes="120x120" rel="apple-touch-icon">
    <link href="/apple-touch-icon-114x114-precomposed-1daf1d75d6.png" sizes="114x114" rel="apple-touch-icon">
    <link href="/apple-touch-icon-76x76-precomposed-f49e287ced.png" sizes="76x76" rel="apple-touch-icon">
    <link href="/apple-touch-icon-72x72-precomposed-a5412e18eb.png" sizes="72x72" rel="apple-touch-icon">
    <link href="/apple-touch-icon-60x60-precomposed-55aaa7669c.png" sizes="60x60" rel="apple-touch-icon">
    <link href="/apple-touch-icon-57x57-precomposed-e896f01ce1.png" sizes="57x57" rel="apple-touch-icon">
    <link href="/apple-touch-icon-precomposed-609906461e.png" rel="apple-touch-icon">
    <meta name="msapplication-config" content="/browserconfig.xml">
    <meta name="application-name" content="The Shunting-Yard Algorithm">
    <meta name="msapplication-tooltip" content="Get the latest updates!">
    <meta name="msapplication-window" content="width=1024;height=768">
    <meta name="msapplication-navbutton-color" content="#ff3300">
    <meta name="msapplication-starturl" content="/">
    <script type="text/javascript" src="https://unpkg.com/@webcomponents/webcomponentsjs@2.2.10/webcomponents-bundle.js"></script>
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-108117457-1"></script>
    <script>window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', 'UA-108117457-1');
    </script>
    <link rel="stylesheet" href="/assets/stylesheets/application-7fc252c149.css">
  </head>
  <body><page-home id="home" name="home"><a class="down triangle" is="x-a" type="button" href="/logs/" name="down-button" style="display:none;"></a>
      <div is="name-card" name="name-card">
        <section class="logo"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 70 70" style="enable-background:new 0 0 70 70;" xml:space="preserve" preserveAspectRatio="xMidYMid">
            <circle class="dot-1" cx="5.3" cy="49.8" r="5.3"></circle>
            <circle class="dot-2" cx="5.3" cy="35" r="5.3"></circle>
            <circle class="dot-3" cx="5.3" cy="20.2" r="5.3"></circle>
            <circle class="dot-4" cx="20.2" cy="20.2" r="5.3"></circle>
            <circle class="dot-5" cx="35" cy="20.2" r="5.3"></circle>
            <circle class="dot-6" cx="35" cy="35" r="5.3"></circle>
            <circle class="dot-7" cx="35" cy="49.8" r="5.3"></circle>
            <circle class="dot-8" cx="49.8" cy="49.8" r="5.3"></circle>
            <circle class="dot-9" cx="64.7" cy="49.8" r="5.3"></circle>
            <circle class="dot-10" cx="64.7" cy="35" r="5.3"></circle>
            <circle class="dot-11" cx="64.7" cy="20.2" r="5.3"></circle>
          </svg></section>
        <section class="name">
          <h1 class="full-name">Andrew Wei</h1>
        </section>
        <section class="position"><span class="position" type="label">Engineer / Designer / Illustrator</span></section>
        <section class="connect"><a is="x-a" type="button" href="mailto:andrewscwei@gmail.com"><span type="icon" style="background-image: url(/assets/images/logs%2F439f2919-b36c-4403-837e-257d6bbde80c_email-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://github.com/andrewscwei"><span type="icon" style="background-image: url(/assets/images/logs%2F92b82402-ce51-49db-a8b2-d2c8924cdbe0_github-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://twitter.com/andrewscwei"><span type="icon" style="background-image: url(/assets/images/logs%2F719d8066-6750-4a08-afb7-a860a10482bc_twitter-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://calculator3.andr.mu"><span type="icon" style="background-image: url(/assets/images/logs%2Fa4f8b935-bf95-45ae-bf82-7fbee9b994be_calculator3-icon.svg?auto=compress,format)"></span></a><a class="inactive" is="x-a" type="button" href="https://www.variante.io"><span type="icon" style="background-image: url(/assets/images/logs%2F3781e233-b368-4800-bebb-17c5e47955d1_vaiante-icon.svg?auto=compress,format)"></span></a><a class="inactive" is="x-a" type="button" href="https://www.grubbb.co"><span type="icon" style="background-image: url(/assets/images/logs%2F698dcb27-4e5e-4f9c-8473-0e5bb46af2d1_grubbb-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://www.verb.studio"><span type="icon" style="background-image: url(/assets/images/logs%2F6bf8145f-5ea8-41d6-8cdd-d9c199a97806_verb-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://dice.andr.mu"><span type="icon" style="background-image: url(/assets/images/logs%2F6d5406b1-3ec0-4915-abdf-f39a8ee95801_dice-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://monitor.andr.mu"><span type="icon" style="background-image: url(/assets/images/logs%2F7021ac91-7a57-4815-90e7-90cf2011cdf7_monitoring-test-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://www.aristotl.io"><span type="icon" style="background-image: url(/assets/images/logs%2F0240039f-2372-4fa9-af5c-18880f192e4c_aristotl-icon.svg?auto=compress,format)"></span></a><a is="x-a" type="button" href="https://www.sybl.io"><span type="icon" style="background-image: url(/assets/images/logs%2F5e961282-d08e-433d-960b-1e114a2bbc12_sybl.svg?auto=compress,format)"></span></a></section>
      </div>
    </page-home>
    <main id="page"><page-cover id="cover" name="cover">
        <figure name="background" style="background-image:url(/assets/images/logs/f64da2ad55d6b411c30c016d6de545a52f6a072b_shunting-yard-cover.jpg?auto=compress,format)"></figure>
      </page-cover>
      <nav is="global-nav" id="global-nav" name="global-nav"><a class="logs" is="x-a" type="button" href="/logs/2/" name="grid-button"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 70 70" style="enable-background:new 0 0 70 70;" xml:space="preserve" preserveAspectRatio="xMidYMid">
            <path class="tl" d="M30,33H3c-1.7,0-3-1.3-3-3V3c0-1.7,1.3-3,3-3h27c1.7,0,3,1.3,3,3v27C33,31.7,31.7,33,30,33L30,33z M6,27h21V6H6V27L6,27z"></path>
            <path class="tr" d="M67,33H40c-1.7,0-3-1.3-3-3V3c0-1.7,1.3-3,3-3h27c1.7,0,3,1.3,3,3v27C70,31.7,68.7,33,67,33L67,33z M43,27h21V6H43V27    L43,27z"></path>
            <path class="bl" d="M30,70H3c-1.7,0-3-1.3-3-3V40c0-1.7,1.3-3,3-3h27c1.7,0,3,1.3,3,3v27C33,68.7,31.7,70,30,70L30,70z M6,64h21V43H6V64L6,64    z"></path>
            <path class="br" d="M67,70H40c-1.7,0-3-1.3-3-3V40c0-1.7,1.3-3,3-3h27c1.7,0,3,1.3,3,3v27C70,68.7,68.7,70,67,70L67,70z M43,64h21V43H43V64    L43,64z"></path>
          </svg></a></nav><page-log id="log" name="page">
        <div id="inner-page">
          <div name="header">
            <div name="info">
              <h1 name="title">The Shunting-Yard Algorithm</h1><span name="date" type="label">Oct 09 11</span>
              <div name="tags"><a class="tag slug" is="x-a" type="button" href="/logs/tag/algorithms/"><span type="label">algorithms</span></a><a class="tag slug" is="x-a" type="button" href="/logs/tag/coding/"><span type="label">coding</span></a><a class="tag slug" is="x-a" type="button" href="/logs/tag/objc/"><span type="label">objc</span></a><a class="tag slug" is="x-a" type="button" href="/logs/tag/math/"><span type="label">math</span></a></div>
            </div>
          </div>
          <div name="contents">
            <p>The <em>Shunting-Yard</em> algorithm is an algorithm developed by <a href="http://en.wikipedia.org/wiki/Edsger_Dijkstra">Edsger Dijkstra</a> which parses infix mathematical expressions into <em>Reverse Polish Notations</em> (RPN). The algorithm scans a string representation of a math expression (i.e. <code>1+4(6)+53</code>) and records each character group in the expression as tokens, and each token will be processed accordingly to generate an RPN stack. From the RPN output the numerical answer can then be easily deducted.</p>
            <h2 id="requirements">Requirements</h2>
            <ol>
              <li>A temporary stack array for storing math operator tokens inside the math expression. Let this be <code>stack</code>.</li>
              <li>An output array. This will eventually be the final RPN output. Let this be <code>output</code>.</li>
              <li>Both arrays implement the stack data structure.</li>
            </ol>
            <h2 id="terms-used">Terms Used</h2>
            <ol>
              <li><strong>Operand</strong>: a fixed numerical value of some sort (i.e. a number, a constant like <code>π</code>, or an <code>ANS</code> in a calculator).</li>
              <li><strong>Unary Postfix Operator</strong>: operators that appear <em>after</em> an operand and only require one operand to operate (i.e. <code>!</code>, <code>%</code>).</li>
              <li><strong>Unary Prefix Operator</strong>: operators that appear <em>before</em> an operand and only require one operand to operate (i.e. <code>√</code>, <code>-</code>).</li>
              <li><strong>Function</strong>: math functions like <code>sin</code>, <code>cos</code>, and <code>tan</code> that take in at least 1 parameter. In this context, only functions that take in exactly 1 parameter are considered.</li>
            </ol>
            <h2 id="walkthrough">Walkthrough</h2>
            <ol>
              <li>Given a string mathematical expression, from left to right, scan for each <code>token</code>.<ol>
                  <li>If <code>token</code> is an <em>operand</em>, push it onto <code>output</code>.</li>
                  <li>If <code>token</code> is a <em>unary postfix operator</em>, push it onto <code>output</code>.</li>
                  <li>If <code>token</code> is a <em>unary prefix operator</em>, push it onto <code>stack</code>.</li>
                  <li>If <code>token</code> is a <em>function</em>, push it onto <code>stack</code>.</li>
                  <li>If <code>token</code> is an <em>operator</em>:<ol>
                      <li>If operator is <em>left-associative</em> (i.e. <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>):<ul>
                          <li>While <code>stack</code> contains an operator that has equal/higher precedence than <code>token</code>, pop <code>stack</code> and push the popped item onto <code>output</code>.</li>
                          <li>Push <code>token</code> onto <code>stack</code>.</li>
                        </ul>
                      </li>
                      <li>If operator is <em>right-associative</em> (i.e. <code>^</code>, <code>EE</code>, <code>√</code>, <code>-</code>):<ul>
                          <li>While <code>stack</code> contains an operator that has higher precedence than <code>token</code>, pop <code>stack</code> and push popped item onto <code>output</code>.</li>
                          <li>Push <code>token</code> onto <code>stack</code>.</li>
                        </ul>
                      </li>
                    </ol>
                  </li>
                  <li>If <code>token</code> is a <em>parenthesis</em>:<ol>
                      <li>If <em>left-parenthesis</em> <code>(</code>:<ul>
                          <li>Push <code>token</code> onto <code>stack</code>.</li>
                        </ul>
                      </li>
                      <li>If <em>right-parenthesis</em> <code>)</code>:<ul>
                          <li>While top of <code>stack</code> is not a <em>left-parenthesis</em>, pop each item from <code>stack</code> and push each popped item onto <code>output</code>.</li>
                          <li>Now pop <code>stack</code> one more time (popped item should be a <em>left-parenthesis</em>).</li>
                          <li>If top of <code>stack</code> is now a <em>function</em>, pop that as well and push it onto <code>output</code>.</li>
                        </ul>
                      </li>
                    </ol>
                  </li>
                </ol>
              </li>
              <li>Pop remainder of <code>stack</code> and push each popped item onto <code>output</code>.</li>
              <li><code>output</code> now represents a postfix math notation, or RPN. <code>stack</code> should now be empty and can be deleted from memory.</li>
            </ol>
            <h2 id="example">Example</h2>
            <p>Consider the math expression: <code>1 + 3 * 9 / (2 + 4)</code></p>
            <ol>
              <li>
                <p>First <code>token</code> is <code>1</code> which is an operand, push it onto <code>output</code>.</p>
                <pre><code>$ output = ["1"]
$ stack = []</code></pre>
              </li>
              <li>
                <p>Next <code>token</code> is <code>+</code> - apply above rules, this goes straight onto <code>stack</code>.</p>
                <pre><code>$ output = ["1"]
$ stack = ["+"]</code></pre>
              </li>
              <li>
                <p>Next <code>token</code> is <code>3</code> - goes onto <code>output</code>.</p>
                <pre><code>$ output = ["1", "3"]
$ stack = ["+"]</code></pre>
              </li>
              <li>
                <p>Next <code>token</code> is <code>*</code> - following the above rules, the only operator in the stack is <code>+</code> which is of lower precedence, so push <code>*</code> straight onto <code>stack</code>.</p>
                <pre><code>$ output = ["1", "3}]
$ stack = ["+", "*}]</code></pre>
              </li>
              <li>
                <p>Next <code>token</code> is <code>9</code> - to <code>output</code>.</p>
                <pre><code>$ output = ["1", "3", "9}]
$ stack = ["+", "*}]</code></pre>
              </li>
              <li>
                <p>Next <code>token</code> is <code>/</code> - <code>stack</code> contains <code>*</code> which is of equal precedence. Pop and push that onto <code>output</code>, and push <code>/</code> onto <code>stack</code>.</p>
                <pre><code>$ output = ["1", "3", "9", "*}]
$ stack = ["+", "/}]</code></pre>
              </li>
              <li>
                <p>Next <code>token</code> is a left-parenthesis - goes straight to <code>stack</code>.</p>
                <pre><code>$ output = ["1", "3", "9", "*}]
$ stack = ["+", "/", "(}]</code></pre>
              </li>
              <li>
                <p>Next <code>token</code> is <code>2</code> - to <code>output</code>.</p>
                <pre><code>$ output = ["1", "3", "9", "*", "2}]
$ stack = ["+", "/", "(}]</code></pre>
              </li>
              <li>
                <p>Next <code>token</code> is <code>+</code> - apply above rules, top of <code>stack</code> is <code>(</code>, NOT an operator, so ignore and push <code>+</code> straight onto <code>stack</code>.</p>
                <pre><code>$ output = ["1", "3", "9", "*", "2}]
$ stack = ["+", "/", "(", "+}]</code></pre>
              </li>
              <li>
                <p>Next <code>token</code> is <code>4</code> - to <code>output</code>.</p>
                <pre><code>$ output = ["1", "3", "9", "*", "2", "4}]
$ stack = ["+", "/", "(", "+}]</code></pre>
              </li>
              <li>
                <p>Last <code>token</code> is a right-parenthesis - pop and push everything on the <code>stack</code> onto <code>output</code> until <code>(</code> is reached. Then pop <code>(</code>.</p>
                <pre><code>$ output = ["1", "3", "9", "*", "2", "4", "+}]
$ stack = ["+", "/}]</code></pre>
              </li>
            </ol>
            <ol start="10">
              <li>
                <p>No more tokens, so pop remaining items from <code>stack</code> and push them onto <code>output</code>.</p>
                <pre><code>$ output = ["1", "3", "9", "*", "2", "4", "+", "/", "+}]
$ stack = []</code></pre>
              </li>
            </ol>
            <p>Final <code>output</code> <code>["1", "3", "9", "*", "2", "4", "+", "/", "+"]</code> is now RPN.</p>
            <h2 id="implementation">Implementation</h2>
            <p>After understanding the concept behind the <em>Shunting-Yard</em> algorithm, implementation should be trivial. However, this is assuming that the tokens are properly recorded from a string-based math expression, and that a method for evaluating RPN stacks is available. The algorithm can be further extended to consider other token variations such as expressions like <code>2(6)</code> and <code>(6)(2)</code> which both mean <code>2*6</code>.</p>
          </div>
          <div name="footer"><a class="prev post" is="x-a" type="button" href="/logs/evaluating-an-rpn-stack/"><span class="prev" type="icon"></span><span type="label">prev</span></a><button class="arrow" is="x-button" type="button" name="top-button"><span class="up" type="icon"></span></button><a class="next post" is="x-a" type="button" href="/logs/as3-event-listeners/"><span class="next" type="icon"></span><span type="label">next</span></a></div>
          <div name="related">
            <div class="tags" name="tags"><button class="tag" is="x-button" type="button" disabled="disabled"><span type="label">related</span></button></div>
            <div class="grid"><a type="button" is="log-entry" href="/logs/google-compute-engine-setup-for-django-app-with-uwsgi/" name="entry">
                <div class="wrapper">
                  <h2 class="title">Google Compute Engine Setup for Django App with uWSGI and Nginx</h2><span class="date" type="label">Jun 01 15</span><span class="number" type="label">12</span>
                </div>
              </a><a type="button" is="log-entry" href="/logs/migrating-an-ios-app-from-paid-to-freemium/" name="entry">
                <div class="wrapper">
                  <h2 class="title">Migrating an iOS App From Paid to Freemium</h2><span class="date" type="label">Jun 10 15</span><span class="number" type="label">14</span>
                </div>
              </a><a type="button" is="log-entry" href="/logs/as3-event-phases/" name="entry">
                <div class="wrapper">
                  <h2 class="title">AS3: Event Phases</h2><span class="date" type="label">Aug 07 11</span><span class="number" type="label">3</span>
                </div>
              </a></div>
          </div>
        </div>
      </page-log>
    </main>
    <script src="/assets/javascripts/polyfills-4df15158e5.js"></script>
    <script src="/assets/javascripts/common-a589f09cab.js"></script>
    <script src="/assets/javascripts/application-a1f774b4b0.js"></script>
  </body>
</html>
