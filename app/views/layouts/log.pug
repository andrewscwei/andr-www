//- (c) Andrew Wei

extends /layouts/page
include /includes/button

append vars
  -
    nav = {};

    const n = _.get(collections, 'log.length');
    const perPage = _.get($, 'documents.log.paginate.perPage');

    if (n && perPage) {
      let index = 0;

      for (let i = 0; i < n; i++)
        if (collections.log[i].uid === uid) { index = i; break; }

      let page = Math.floor(index/perPage + 1);

      nav.grid = `/logs/${(page > 1) ? `${page}/` : ''}`;
    }

block page
  div(is='page-log' name='page')
    div#inner-page
      div(name='header')
        div(name='info')
          h1(name='title')= title
          span(name='date' type='label')= m(date).format('MMM DD YY')
          if tags && tags.length
            div(name='tags')
              each tag in tags
                +button({ label: tag, href: `/logs/${tag}/` }).tag
      div(name='contents')
        != body
        div(name='footer')
